<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yari's Apple</title>
  <link rel="stylesheet" href="styleManzanas.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">

</head>

<body>
  <!-- Header -->
  <header>
    <section class="container">
      <a href="index.html"><img src="https://i.postimg.cc/L6Qc1kBT/yarislogo.png" alt="logoYarisApple" class="logo" /></a>
    </section>

      <section class="navbar">
      <nav>
        <ul>
          <li><a href="index.html">Inicio</a></li>
          <li><a href="manzanas.html">Manzanas</a></li>
          <li><a href="carritoSnacks.html">Carrito de snacks</a></li>
          <li><a href="otrosServicios.html">Otros servicios</a></li>
          <li><a href="contacto.html">Contacto</a></li>
        </ul>
      </nav>
    </section>
  </header>


    <!-- Main Section -->
    <main>

      <form id="formManzanas" enctype="multipart/form-data">

  <h2>¬øTienes un evento en puerta?</h2>
  <p>Cotiza tus manzanas üçè</p>

  <label for="cantidad">Cantidad:</label>
  <input type="number" id="cantidad" name="cantidad" required oninput="calcularPrecio()">

  <label>Sabores:</label>
  <div class="checkbox-group">
    <label><input type="radio" name="sabor" value="Tamarindo" onclick="toggleColores(false)"> Tamarindo</label>
    <label><input type="radio" name="sabor" value="Chocolate" onclick="toggleColores(true)"> Chocolate</label>
  </div>

  <div id="coloresChocolate" style="display: none;">
    <p>Colores disponibles para chocolate:</p>
    <label><input type="radio" name="color" value="Azul"> Azul</label><br>
    <label><input type="radio" name="color" value="Rosa"> Rosa</label><br>
    <label><input type="radio" name="color" value="Rojo"> Rojo</label><br>
    <label><input type="radio" name="color" value="Amarillo"> Amarillo</label><br>
    <label><input type="radio" name="color" value="Lila"> Lila</label><br>
    <label><input type="radio" name="color" value="Blanco"> Blanco</label><br>
    <label><input type="radio" name="color" value="Caf√©"> Caf√©</label>
  </div>

  <label for="evento">Tipo de evento:</label>
  <input type="text" id="evento" name="evento">

  <label for="tematica">Tem√°tica de su evento:</label>
  <input type="text" id="tematica" name="tematica">

  <label for="imagen">Sugerencia de imagen:</label>
  <input type="file" id="imagen" name="imagen" accept="image/*">

  <p>Liston:</p>
  <label><input type="radio" name="liston" value="Curly" onchange="calcularPrecio()"> Curly</label>
  <label><input type="radio" name="liston" value="Tela" onchange="calcularPrecio()"> Tela</label>

  <p>Presentaci√≥n:</p>
  <label><input type="radio" name="presentacion" value="Bolsita celof√°n" onchange="calcularPrecio()"> Bolsita celof√°n</label>
  <label><input type="radio" name="presentacion" value="Vaso de acr√≠lico" onchange="calcularPrecio()"> Vaso de acr√≠lico</label>

  <label for="fechayhoraevento">Fecha y hora del evento:</label>
<input type="datetime-local" id="fechayhoraevento" name="fechayhoraevento" required>

  <label for="especificaciones">Agrega m√°s especificaciones:</label>
  <textarea id="especificaciones" name="especificaciones" rows="4" placeholder="Escribe aqu√≠ cualquier detalle especial..."></textarea>

  <label for="contacto">¬øC√≥mo te contactamos? (Correo o WhatsApp):</label>
  <input type="text" id="contacto" name="contacto" placeholder="ej. correo@ejemplo.com o 6561234567" required>

 <!-- Recuadro de precio -->
<div class="divtotal">
  Total: <span id="precioTotal">$0.00</span> MXN
</div>

<!-- Nota aclaratoria -->
<div class="divnotaaclaratoria">
  <em>‚Äª Este monto es solo una cotizaci√≥n estimada. El precio final puede variar seg√∫n detalles espec√≠ficos.</em>
</div>

  <!-- Configuraci√≥n de FormSubmit -->
  <input type="hidden" name="_next" value="https://jaquelinecruz97.github.io/yarisApple/index.html">
  <input type="hidden" name="_captcha" value="false">

  <input type="hidden" name="total" id="totalInput">
  <p id="precioUnidad" style="font-weight: bold;">$35.00 MXN por manzana</p>
<p id="mensajeDescuento">‚ùå No aplica descuento</p>


  <button type="submit" class="btn-enviar">üì© Enviar cotizaci√≥n</button>
</form>

<script>
 function toggleColores(mostrar) {
  const colores = document.getElementById("coloresChocolate");
  colores.style.display = mostrar ? "block" : "none";
}

function calcularPrecio() {
  const cantidad = parseInt(document.getElementById('cantidad').value) || 0;
  const liston = document.querySelector('input[name="liston"]:checked')?.value;
  const presentacion = document.querySelector('input[name="presentacion"]:checked')?.value;

  let precioBase = 35; // Precio base por manzana
  let extra = 0;
  let aplicaDescuento = false;

  // Mostrar primero si cumple la cantidad m√≠nima
  if (cantidad >= 25) {
    mostrarMensajeDescuento("‚úÖ Aplica descuento", true);
    aplicaDescuento = true;
  } else {
    mostrarMensajeDescuento("‚ùå No aplica descuento", false);
  }

  // Condiciones que cancelan el descuento aunque haya 25 piezas
  if (liston === 'Tela') {
    extra += 5;
    aplicaDescuento = false;
    mostrarMensajeDescuento("‚ùå No aplica descuento por list√≥n de tela", false);
  }

  if (presentacion === 'Vaso de acr√≠lico') {
    extra += 10;
    aplicaDescuento = false;
    mostrarMensajeDescuento("‚ùå No aplica descuento por vaso de acr√≠lico", false);
  }

   if (liston === 'Tela' && presentacion === 'Vaso de acr√≠lico' ) {
    mostrarMensajeDescuento("‚ùå No aplica descuento por list√≥n de tela y vaso de acr√≠lico", false);
  }

  // Si s√≠ aplica el descuento final
  if (cantidad >= 25 && aplicaDescuento) {
    precioBase -= 5;
    mostrarMensajeDescuento("‚úÖ Descuento aplicado", true);
  }

  const precioUnitario = precioBase + extra;
  const total = cantidad * precioUnitario;

  document.getElementById('precioTotal').textContent = `$${total.toFixed(2)}`;
  document.getElementById('totalInput').value = `$${total.toFixed(2)} MXN`;

  const unidadDisplay = document.getElementById('precioUnidad');
  if (unidadDisplay) {
    unidadDisplay.textContent = `$${precioUnitario.toFixed(2)} MXN por manzana`;
  }
}

function mostrarMensajeDescuento(mensaje, esDescuento) {
  const mensajeDiv = document.getElementById('mensajeDescuento');
  if (mensajeDiv) {
    mensajeDiv.textContent = mensaje;
    mensajeDiv.style.color = esDescuento ? 'green' : 'red';
  }
}


document.getElementById("formManzanas").addEventListener("submit", function (e) {
  e.preventDefault(); // evita el env√≠o tradicional

  calcularPrecio(); // aseg√∫rate que el total est√© actualizado

  const form = e.target;
  const formData = new FormData(form);

  fetch("https://formsubmit.co/yarisapple.snacks@gmail.com", {
    method: "POST",
    body: formData
  })
  .then(response => {
    if (response.ok) {
      alert("¬°Gracias! Te contactaremos lo m√°s pronto posible.");
      form.reset(); // borra los datos del formulario
      document.getElementById('precioTotal').textContent = "$0.00"; // reinicia el total
      toggleColores(false); // oculta colores de chocolate
    } else {
      alert("Error al enviar la cotizaci√≥n. Intenta nuevamente.");
    }
  })
  .catch(error => {
    alert("Hubo un problema. Intenta de nuevo m√°s tarde.");
    console.error("Error al enviar el formulario:", error);
  });
});
</script>
      </main>
     
        
  <br>
      <!-- Footer -->
      <footer>
  <p>S√≠guenos en nuestras redes sociales:</p>
  <div class="social-icons">
    <a href="https://www.facebook.com/yaris.apple" target="_blank" aria-label="Facebook">
      <img src="https://cdn-icons-png.flaticon.com/512/20/20837.png" alt="Facebook">
    </a>
    <a href="https://www.tiktok.com/@biancayarimecruzc?_t=ZS-8wWzFveMgUq&_r=1" target="_blank" aria-label="TikTok">
      <img src="https://cdn-icons-png.flaticon.com/512/3046/3046120.png" alt="TikTok">
    </a>
  </div>
  <p>&copy; 2025 Yari¬¥s Apple</p>
</footer>

    </body>
    </html>
